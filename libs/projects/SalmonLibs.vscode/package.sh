#!/bin/bash
SALMON_VERSION=2.3.0
CURRDIR=$(pwd)

TS_SRC_ROOT=../../src/typescript
JS_SRC_ROOT=./lib
OUTPUT_ROOT=$CURRDIR/../../../output
TS_OUTPUT_DIR=$OUTPUT_ROOT/typescript
JS_OUTPUT_DIR=$OUTPUT_ROOT/javascript
DOCS=./docs

SALMON_CORE=salmon-core
SALMON_FS=salmon-fs
TS_SALMON_CORE_PACKAGE_NAME=$SALMON_CORE.ts.$SALMON_VERSION
TS_SALMON_FS_PACKAGE_NAME=$SALMON_FS.ts.$SALMON_VERSION
JS_SALMON_CORE_PACKAGE_NAME=$SALMON_CORE.js.$SALMON_VERSION
JS_SALMON_FS_PACKAGE_NAME=$SALMON_FS.js.$SALMON_VERSION

mkdir -p $TS_OUTPUT_DIR
mkdir -p $JS_OUTPUT_DIR

# Typescript SalmonCore
mkdir -p $TS_OUTPUT_DIR/$TS_SALMON_CORE_PACKAGE_NAME
rm -rf $TS_OUTPUT_DIR/$TS_SALMON_CORE_PACKAGE_NAME/*
cp -r $TS_SRC_ROOT/$SALMON_CORE $TS_OUTPUT_DIR/$TS_SALMON_CORE_PACKAGE_NAME
cp $DOCS/Salmon.Core.README.txt $TS_OUTPUT_DIR/$TS_SALMON_CORE_PACKAGE_NAME/README.txt
cd $TS_OUTPUT_DIR/$TS_SALMON_CORE_PACKAGE_NAME
zip -r ../$TS_SALMON_CORE_PACKAGE_NAME.zip *
cd $CURRDIR

# Typescript SalmonFS
mkdir -p $TS_OUTPUT_DIR/$TS_SALMON_FS_PACKAGE_NAME
rm -rf $TS_OUTPUT_DIR/$TS_SALMON_FS_PACKAGE_NAME/*
cp -r $TS_SRC_ROOT/$SALMON_FS $TS_OUTPUT_DIR/$TS_SALMON_FS_PACKAGE_NAME
cp $DOCS/Salmon.FS.README.txt $TS_OUTPUT_DIR/$TS_SALMON_FS_PACKAGE_NAME/README.txt
cd $TS_OUTPUT_DIR/$TS_SALMON_FS_PACKAGE_NAME
zip -r ../$TS_SALMON_FS_PACKAGE_NAME.zip *
cd $CURRDIR

# Javascript SalmonCore
mkdir -p $JS_OUTPUT_DIR/$JS_SALMON_CORE_PACKAGE_NAME
rm -rf $JS_OUTPUT_DIR/$JS_SALMON_CORE_PACKAGE_NAME/*
cp -r $JS_SRC_ROOT/$SALMON_CORE $JS_OUTPUT_DIR/$JS_SALMON_CORE_PACKAGE_NAME
cp $DOCS/Salmon.Core.README.txt $JS_OUTPUT_DIR/$JS_SALMON_CORE_PACKAGE_NAME/README.txt
cd $JS_OUTPUT_DIR/$JS_SALMON_CORE_PACKAGE_NAME
zip -r ../$JS_SALMON_CORE_PACKAGE_NAME.zip *
cd $CURRDIR

# Javascript SalmonFS
mkdir -p $JS_OUTPUT_DIR/$JS_SALMON_FS_PACKAGE_NAME
rm -rf $JS_OUTPUT_DIR/$JS_SALMON_FS_PACKAGE_NAME/*
cp -r $JS_SRC_ROOT/$SALMON_FS $JS_OUTPUT_DIR/$JS_SALMON_FS_PACKAGE_NAME
cp $DOCS/Salmon.FS.README.txt $JS_OUTPUT_DIR/$JS_SALMON_FS_PACKAGE_NAME/README.txt
cd $JS_OUTPUT_DIR/$JS_SALMON_FS_PACKAGE_NAME
zip -r ../$JS_SALMON_FS_PACKAGE_NAME.zip *
cd $CURRDIR